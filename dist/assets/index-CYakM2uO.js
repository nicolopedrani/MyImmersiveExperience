(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const A of i.addedNodes)A.tagName==="LINK"&&A.rel==="modulepreload"&&r(A)}).observe(document,{childList:!0,subtree:!0});function o(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=o(n);fetch(n.href,i)}})();const d=[[0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,5,0,0,0,0,0,0],[0,0,0,0,0,2,0,0,0,0,0,0],[0,0,0,0,0,2,0,0,0,0,0,0],[0,3,2,2,2,2,2,2,2,4,0,0],[0,0,0,0,0,2,0,0,0,0,0,0],[0,0,0,0,0,2,0,0,0,0,0,0],[0,0,0,0,0,2,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0]],B=d[0].length,R=d.length,s={down_idle:[],down_walk:[],up_idle:[],up_walk:[],left_idle:[],left_walk:[],right_idle:[],right_walk:[]},e={x:Math.floor(B/2),y:R-2,direction:"down",animationState:"idle",currentAnimation:[],frameIndex:0,animationTimer:0,animationSpeed:.15};e.currentAnimation=s.down_idle;function F(a){e.animationTimer+=a,e.animationTimer>=e.animationSpeed&&(e.animationTimer=0,e.frameIndex=(e.frameIndex+1)%e.currentAnimation.length)}function L(a,t){const o=e.currentAnimation[e.frameIndex];if(!o)return;const r=e.x*t,n=e.y*t;if(a.save(),e.direction==="left"){const i=o.width;a.translate(r,n),a.scale(-1,1),a.drawImage(o,-i,0)}else a.drawImage(o,r,n);a.restore()}let E=0,p=0,u=0;function Q(a){u++,a-p>1e3&&(E=u,u=0,p=a);const t=document.getElementById("debug-panel");t&&(t.innerHTML=`
      x: ${e.x}<br>
      y: ${e.y}<br>
      dir: ${e.direction}<br>
      state: ${e.animationState}<br>
      frame: ${e.frameIndex}<br>
      FPS: ${E}
    `)}const S="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAB1JREFUOI1jtOv0+M9AAWCiRPOoAaMGjBowmAwAAJhEAi4/QQzBAAAAAElFTkSuQmCC",T="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAB1JREFUOI1jfLKs6D8DBYCJEs2jBowaMGrAYDIAAFnyAxuTOlahAAAAAElFTkSuQmCC",I="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABQCAYAAACpv3NFAAAAAXNSR0IArs4c6QAABZFJREFUeJztW09PG0cU/zk1ogZFvbBFCjgXDgYipAYJRzKHXCLlGkeIT9EvkAMnH/oJ+iUsFM6VcokESBipiYRi44MPjUGVte6BVmDRWNCDmeXteHa9M/Nm6WF/Esrszuzse7/3Z97MOkCGDBkyZMiQIUOGdFFY8G4LC97tQ8uRczEpVWxw7ufE9eDcz4n+1Z0yAKBZa4COdSFPHPKckwlFhXIA0Kw1qLJj/fS6WWvcqghzCbYXCKs2aw1U6xUAQPtkCGBkZVnp0lo+NKa0lkf7ZBga26w1nJPwiGMS6vKrO2XsbR8CuFeyWq8EbXpfvlYR5TpXWLNbWPBuq/VKyHqyggLtk2Fkn2rM3vZh4E1724dOvIGNANcQXgXw5garEEh7GVvdKWN1p8z6XmMCRNITMd8+GQYJzQXk0OLKDSxJUE5y3FDlDi5vsCJAFDF0KXMBOq9YZrneZUQAdX9ayQFwGgrtkyG4E65RNqWlrAouw4GCY2UwXk4oCbSqS0t5OexM6wSrEKACuFwBVOB6rzYBctaVY56biLj5qPVNoeUy8jaWrs3U/blCIek8dNOlGwbGyyBdimRBOfNAlAdweZp20lDFPxcEkSrl6LtU/aZbZy0PUMV/EiQdR5WXyRW5hs5Ft9Gmy6B2CFTrlaD40fGApAVSaS0fzKs6N4g6SzAtibUJ2K/nxg4t4hQzLZPjCJPnqtYrqNYrRiRoETA493P+7kHonhBSJaysvA4JqqQqv4MjERolQWD8YDPuFCiuPykm1QOmlaCWVIUF79bb2oS38m3i2ElhoZs/gGhPsDkuM6oD/NZUaBeoUiaqLogKlUkx76rkNsoB/u4BvK1N5ZgkCVFuJ80RUeu/DbQ9QLiaKgxoQpSVpW48yZqTiBJo1hrwtjbhbW0aL4MspZxOoSOPj2tP2ltEeaEOjFYBkQj91tRIkJik6LemEiXNpJDn81tT8HcPjJOgsQeolJfvcSlP5xHEeyvfgvi3+U5glAPkYkgIKQRU3ZfbUfBbU8pn5Gc5lAcszgRFW45Dan0ZsrdEeYrKk1S47Axx9enIigSjEBCfsGeevwgJM7uUT2xlCurWceMuO/zHbtYfRi47Q/i7B5hdyo/dlxHl3lH9l53h2DxXn46Cf22tD1h+HBWhMPP8RUCAcEv5nkxQFOSxKiI5FBew8gAqhLBWnPJUmaj27FI+0uouwMIiTYoiLyQlQu6nJFJQEjg/j7P/4ICGhUCUQnFjhMKUUBc/kGD5OkwhCxmlfPlxMZTQ6DWdiyvZRcHZD5CiwgIAyo+LAIDGP93QNb2X1k/mnH3IIwosA0ct4F7Rjfnpu65i6JnR/SI+nv6+MnoOAHDqSkbAQQjcYZn8YXDurwzO/RUAePusEBq4MT8dEFKcU4oTmosb3ARMFLS06AWKbsxPRyltPL8uOEMgsWClRQ+Aj27/JmgD0+j2b3TexRIaXB6gZZX2ma9U1sAbrMFBgJYgHz73gvarn+ZTfbcKrpJgLIT122d+6PohYEuAtgWEmx/3rgHce4Sm+1vJQJGaB7xcXm+9e/0UwL2ywvLHveug/e71U7xcXm+lJZcNAUbMj7L+CMW5R4EnHPeuQ31pyAIA35k+CGAu6UBh/faZj7/+vsL7LwNszE/jh5kc3qw/wX7nAgCw37nAj9//izfrT9C9mPn5j/6fv2rI09dVAEg5CXb7N3j/ZRBcU4vflb/o9m/QPvNTCwWbQugUCVxPWP/D5x6Oe9eBosB6q3jmj5Hw0ay8MS6KbHdcxrEnrPv2WQGlRQ+//PaVkKONByMAcLRJ0YBVSfwghdD/CVyHDg/lBdYbIs5Tl7RJYNkNch87pUUC2ymRq3M3V0SwH4+lcfBoS4bTM8HU/7MyJhPiVOEMGTJkyJAhQwaB/wCcF1ybPAOXlAAAAABJRU5ErkJggg==",v="/MyImmersiveExperience/assets/Player-LaRVoEvR.png",C={};let k=0;const D=5;let w=null;function m(a){w=a,c("grass",S),c("path",T),c("oak_tree",I),c("player_sprite_sheet",v),c("temp_boss",I)}function c(a,t){const o=new Image;o.onload=()=>{C[a]=o,k++,k===D&&w&&w()},o.onerror=()=>{console.error(`Error loading image: ${t}`)},o.src=t}m.getAssets=()=>C;const y=32,b=32,g=64;function x(){const a=m.getAssets().player_sprite_sheet;function t(o,r){const n=document.createElement("canvas");n.width=g,n.height=g;const i=n.getContext("2d");if(!i)throw new Error("Failed to get 2D context");return i.drawImage(a,r*y,o*b,y,b,0,0,g,g),n}s.down_walk.push(t(0,0)),s.right_walk.push(t(1,1)),s.up_walk.push(t(2,1)),s.down_idle.push(s.down_walk[0]),s.right_idle.push(s.right_walk[0]),s.up_idle.push(s.up_walk[0])}function G(){document.addEventListener("keydown",a=>{let t=null;switch(a.key){case"ArrowUp":t="up";break;case"ArrowDown":t="down";break;case"ArrowLeft":t="left";break;case"ArrowRight":t="right";break}if(!t)return;if(t!==e.direction){e.direction=t,e.animationState="idle";const r=e.direction==="left"?"right":e.direction;e.currentAnimation=s[`${r}_idle`],e.frameIndex=0,e.animationTimer=0}else{let r=e.x,n=e.y;if(t==="up"?n--:t==="down"?n++:t==="left"?r--:t==="right"&&r++,r>=0&&r<B&&n>=0&&n<R){const i=d[n][r];[0,2,3,4,5].includes(i)?(e.x=r,e.y=n,e.animationState="walk"):e.animationState="idle"}}const o=e.direction==="left"?"right":e.direction;e.currentAnimation=s[`${o}_${e.animationState}`],e.frameIndex=0,e.animationTimer=0,a.preventDefault()}),document.addEventListener("keyup",a=>{if(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(a.key)){e.animationState="idle";const t=e.direction==="left"?"right":e.direction;e.currentAnimation=s[`${t}_idle`],e.frameIndex=0,e.animationTimer=0}})}function J(a){const t=document.getElementById("gameCanvas"),o=t?t.getContext("2d"):null,r=64,n=a[0].length,i=a.length,A=n*r,l=i*r;return{canvas:t,ctx:o,TILE_SIZE:r,GAME_WIDTH:A,GAME_HEIGHT:l}}const{canvas:f,ctx:h,TILE_SIZE:H,GAME_WIDTH:U,GAME_HEIGHT:M}=J(d);if(f&&h)f.width=U,f.height=M;else throw new Error("Canvas or context not initialized");let P=0;function O(){requestAnimationFrame(_)}function _(a){const t=(a-P)/1e3;P=a,F(t),h&&W(h,d,H),requestAnimationFrame(_),Q(a)}function W(a,t,o){a.clearRect(0,0,U,M);const r=m.getAssets();for(let n=0;n<t.length;n++)for(let i=0;i<t[0].length;i++){const A=t[n][i];let l=null;switch(A){case 0:l=r.grass??null;break;case 1:l=r.oak_tree??null;break;case 2:case 3:case 4:case 5:l=r.path??null;break}l&&a.drawImage(l,i*o,n*o,o,o),A===1&&r.oak_tree&&a.drawImage(r.oak_tree,i*o,n*o-(r.oak_tree.height-o))}L(a,o)}m(()=>{x(),G(),O()});

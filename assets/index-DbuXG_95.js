(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))o(t);new MutationObserver(t=>{for(const i of t)if(i.type==="childList")for(const A of i.addedNodes)A.tagName==="LINK"&&A.rel==="modulepreload"&&o(A)}).observe(document,{childList:!0,subtree:!0});function a(t){const i={};return t.integrity&&(i.integrity=t.integrity),t.referrerPolicy&&(i.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?i.credentials="include":t.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(t){if(t.ep)return;t.ep=!0;const i=a(t);fetch(t.href,i)}})();const d=[[0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,5,0,0,0,0,0,0],[0,0,0,0,0,2,0,0,0,0,0,0],[0,0,0,0,0,2,0,0,0,0,0,0],[0,3,2,2,2,2,2,2,2,4,0,0],[0,0,0,0,0,2,0,0,0,0,0,0],[0,0,0,0,0,2,0,0,0,0,0,0],[0,0,0,0,0,2,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0]],y=d[0].length,R=d.length,s={down_idle:[],down_walk:[],up_idle:[],up_walk:[],left_idle:[],left_walk:[],right_idle:[],right_walk:[]},e={x:Math.floor(y/2),y:R-2,direction:"down",animationState:"idle",currentAnimation:[],frameIndex:0,animationTimer:0,animationSpeed:.15};e.currentAnimation=s.down_idle;function b(r){e.animationTimer+=r,e.animationTimer>=e.animationSpeed&&(e.animationTimer=0,e.frameIndex=(e.frameIndex+1)%e.currentAnimation.length)}function M(r,n){const a=e.currentAnimation[e.frameIndex];if(!a)return;const o=e.x*n,t=e.y*n;if(r.save(),e.direction==="left"){const i=a.width;r.translate(o,t),r.scale(-1,1),r.drawImage(a,-i,0)}else r.drawImage(a,o,t);r.restore()}const _="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAB1JREFUOI1jtOv0+M9AAWCiRPOoAaMGjBowmAwAAJhEAi4/QQzBAAAAAElFTkSuQmCC",F="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAB1JREFUOI1jfLKs6D8DBYCJEs2jBowaMGrAYDIAAFnyAxuTOlahAAAAAElFTkSuQmCC",h="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABQCAYAAACpv3NFAAAAAXNSR0IArs4c6QAABZFJREFUeJztW09PG0cU/zk1ogZFvbBFCjgXDgYipAYJRzKHXCLlGkeIT9EvkAMnH/oJ+iUsFM6VcokESBipiYRi44MPjUGVte6BVmDRWNCDmeXteHa9M/Nm6WF/Esrszuzse7/3Z97MOkCGDBkyZMiQIUOGdFFY8G4LC97tQ8uRczEpVWxw7ufE9eDcz4n+1Z0yAKBZa4COdSFPHPKckwlFhXIA0Kw1qLJj/fS6WWvcqghzCbYXCKs2aw1U6xUAQPtkCGBkZVnp0lo+NKa0lkf7ZBga26w1nJPwiGMS6vKrO2XsbR8CuFeyWq8EbXpfvlYR5TpXWLNbWPBuq/VKyHqyggLtk2Fkn2rM3vZh4E1724dOvIGNANcQXgXw5garEEh7GVvdKWN1p8z6XmMCRNITMd8+GQYJzQXk0OLKDSxJUE5y3FDlDi5vsCJAFDF0KXMBOq9YZrneZUQAdX9ayQFwGgrtkyG4E65RNqWlrAouw4GCY2UwXk4oCbSqS0t5OexM6wSrEKACuFwBVOB6rzYBctaVY56biLj5qPVNoeUy8jaWrs3U/blCIek8dNOlGwbGyyBdimRBOfNAlAdweZp20lDFPxcEkSrl6LtU/aZbZy0PUMV/EiQdR5WXyRW5hs5Ft9Gmy6B2CFTrlaD40fGApAVSaS0fzKs6N4g6SzAtibUJ2K/nxg4t4hQzLZPjCJPnqtYrqNYrRiRoETA493P+7kHonhBSJaysvA4JqqQqv4MjERolQWD8YDPuFCiuPykm1QOmlaCWVIUF79bb2oS38m3i2ElhoZs/gGhPsDkuM6oD/NZUaBeoUiaqLogKlUkx76rkNsoB/u4BvK1N5ZgkCVFuJ80RUeu/DbQ9QLiaKgxoQpSVpW48yZqTiBJo1hrwtjbhbW0aL4MspZxOoSOPj2tP2ltEeaEOjFYBkQj91tRIkJik6LemEiXNpJDn81tT8HcPjJOgsQeolJfvcSlP5xHEeyvfgvi3+U5glAPkYkgIKQRU3ZfbUfBbU8pn5Gc5lAcszgRFW45Dan0ZsrdEeYrKk1S47Axx9enIigSjEBCfsGeevwgJM7uUT2xlCurWceMuO/zHbtYfRi47Q/i7B5hdyo/dlxHl3lH9l53h2DxXn46Cf22tD1h+HBWhMPP8RUCAcEv5nkxQFOSxKiI5FBew8gAqhLBWnPJUmaj27FI+0uouwMIiTYoiLyQlQu6nJFJQEjg/j7P/4ICGhUCUQnFjhMKUUBc/kGD5OkwhCxmlfPlxMZTQ6DWdiyvZRcHZD5CiwgIAyo+LAIDGP93QNb2X1k/mnH3IIwosA0ct4F7Rjfnpu65i6JnR/SI+nv6+MnoOAHDqSkbAQQjcYZn8YXDurwzO/RUAePusEBq4MT8dEFKcU4oTmosb3ARMFLS06AWKbsxPRyltPL8uOEMgsWClRQ+Aj27/JmgD0+j2b3TexRIaXB6gZZX2ma9U1sAbrMFBgJYgHz73gvarn+ZTfbcKrpJgLIT122d+6PohYEuAtgWEmx/3rgHce4Sm+1vJQJGaB7xcXm+9e/0UwL2ywvLHveug/e71U7xcXm+lJZcNAUbMj7L+CMW5R4EnHPeuQ31pyAIA35k+CGAu6UBh/faZj7/+vsL7LwNszE/jh5kc3qw/wX7nAgCw37nAj9//izfrT9C9mPn5j/6fv2rI09dVAEg5CXb7N3j/ZRBcU4vflb/o9m/QPvNTCwWbQugUCVxPWP/D5x6Oe9eBosB6q3jmj5Hw0ay8MS6KbHdcxrEnrPv2WQGlRQ+//PaVkKONByMAcLRJ0YBVSfwghdD/CVyHDg/lBdYbIs5Tl7RJYNkNch87pUUC2ymRq3M3V0SwH4+lcfBoS4bTM8HU/7MyJhPiVOEMGTJkyJAhQwaB/wCcF1ybPAOXlAAAAABJRU5ErkJggg==",Q="/MyImmersiveExperience/assets/Player-LaRVoEvR.png",B={};let E=0;const T=5;let f=null;function u(r){f=r,c("grass",_),c("path",F),c("oak_tree",h),c("player_sprite_sheet",Q),c("temp_boss",h)}function c(r,n){const a=new Image;a.onload=()=>{B[r]=a,E++,E===T&&f&&f()},a.onerror=()=>{console.error(`Error loading image: ${n}`)},a.src=n}u.getAssets=()=>B;const p=32,I=32,g=64;function L(){const r=u.getAssets().player_sprite_sheet;function n(a,o){const t=document.createElement("canvas");t.width=g,t.height=g;const i=t.getContext("2d");if(!i)throw new Error("Failed to get 2D context");return i.drawImage(r,o*p,a*I,p,I,0,0,g,g),t}s.down_walk.push(n(0,0)),s.right_walk.push(n(1,1)),s.up_walk.push(n(2,1)),s.down_idle.push(s.down_walk[0]),s.right_idle.push(s.right_walk[0]),s.up_idle.push(s.up_walk[0])}function v(){document.addEventListener("keydown",r=>{let n=null;switch(r.key){case"ArrowUp":n="up";break;case"ArrowDown":n="down";break;case"ArrowLeft":n="left";break;case"ArrowRight":n="right";break}if(!n)return;if(n!==e.direction){e.direction=n,e.animationState="idle";const o=e.direction==="left"?"right":e.direction;e.currentAnimation=s[`${o}_idle`],e.frameIndex=0,e.animationTimer=0}else{let o=e.x,t=e.y;if(n==="up"?t--:n==="down"?t++:n==="left"?o--:n==="right"&&o++,o>=0&&o<y&&t>=0&&t<R){const i=d[t][o];[0,2,3,4,5].includes(i)?(e.x=o,e.y=t,e.animationState="walk"):e.animationState="idle"}}const a=e.direction==="left"?"right":e.direction;e.currentAnimation=s[`${a}_${e.animationState}`],e.frameIndex=0,e.animationTimer=0,r.preventDefault()}),document.addEventListener("keyup",r=>{if(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(r.key)){e.animationState="idle";const n=e.direction==="left"?"right":e.direction;e.currentAnimation=s[`${n}_idle`],e.frameIndex=0,e.animationTimer=0}})}function S(r){const n=document.getElementById("gameCanvas"),a=n?n.getContext("2d"):null,o=64,t=r[0].length,i=r.length,A=t*o,l=i*o;return{canvas:n,ctx:a,TILE_SIZE:o,GAME_WIDTH:A,GAME_HEIGHT:l}}const{canvas:m,ctx:w,TILE_SIZE:D,GAME_WIDTH:P,GAME_HEIGHT:C}=S(d);if(m&&w)m.width=P,m.height=C;else throw new Error("Canvas or context not initialized");let k=0;function G(){requestAnimationFrame(U)}function U(r){const n=(r-k)/1e3;k=r,b(n),w&&x(w,d,D),requestAnimationFrame(U)}function x(r,n,a){r.clearRect(0,0,P,C);const o=u.getAssets();for(let t=0;t<n.length;t++)for(let i=0;i<n[0].length;i++){const A=n[t][i];let l=null;switch(A){case 0:l=o.grass??null;break;case 1:l=o.oak_tree??null;break;case 2:case 3:case 4:case 5:l=o.path??null;break}l&&r.drawImage(l,i*a,t*a,a,a),A===1&&o.oak_tree&&r.drawImage(o.oak_tree,i*a,t*a-(o.oak_tree.height-a))}M(r,a)}u(()=>{L(),v(),G()});
